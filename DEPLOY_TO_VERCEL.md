# Deploy to Vercel - Step by Step Guide 🚀

## ✅ Pre-Deployment Checklist

Everything is ready! I've configured:
- ✅ `vercel.json` - Vercel configuration
- ✅ `api/claude.js` - Backend API proxy
- ✅ `claudeService.ts` - Updated to use backend in production
- ✅ All code optimizations applied

---

## 🚀 Deployment Steps

### Step 1: Install Vercel CLI

```bash
npm install -g vercel
```

### Step 2: Login to Vercel

```bash
vercel login
```

This will open your browser to log in.

### Step 3: Deploy Your App

```bash
# Navigate to your project (if not already there)
cd /Users/sam/Documents/repositories/calhacks25

# Deploy to Vercel
vercel
```

**Follow the prompts:**
- Set up and deploy? **Y** (Yes)
- Which scope? **Select your account**
- Link to existing project? **N** (No, create new)
- Project name? **Press Enter** (uses folder name) or type custom name
- In which directory is your code? **./** (Press Enter)
- Want to override settings? **N** (No)

Vercel will build and deploy your app!

### Step 4: Add Your API Key as a Secret

```bash
# Replace with your actual Claude API key
vercel secrets add anthropic-api-key sk-ant-your-actual-key-here
```

### Step 5: Add Environment Variable to Project

```bash
# Link the secret to your project
vercel env add ANTHROPIC_API_KEY
```

When prompted:
- Select: **Production**
- Enter value: **@anthropic-api-key** (this references the secret)

Also add for Preview and Development if desired:
```bash
vercel env add ANTHROPIC_API_KEY
# Select: Preview
# Enter: @anthropic-api-key

vercel env add ANTHROPIC_API_KEY
# Select: Development  
# Enter: @anthropic-api-key
```

### Step 6: Redeploy with Environment Variables

```bash
vercel --prod
```

This final deployment will include your API key!

---

## 🎉 Deployment Complete!

Your app is now live with:
- ✅ Real Claude AI activity generation
- ✅ Real AI-powered photo verification
- ✅ Secure API key (not exposed to frontend)
- ✅ Automatic image compression
- ✅ All optimizations enabled

---

## 🔗 Getting Your URL

After deployment, Vercel will show:
```
✅ Production: https://your-app-name.vercel.app
```

Visit this URL to see your live app with real Claude AI!

---

## 📝 Alternative: Deploy via Vercel Dashboard

### 1. Push to GitHub

```bash
# If not already in a git repo
git init
git add .
git commit -m "Deploy DoGood app with Claude AI"

# Create GitHub repo and push
gh repo create calhacks25 --public --source=. --remote=origin --push
# OR push to existing repo:
# git remote add origin https://github.com/your-username/calhacks25.git
# git push -u origin main
```

### 2. Import on Vercel Dashboard

1. Go to [vercel.com/dashboard](https://vercel.com/dashboard)
2. Click **"Add New"** → **"Project"**
3. Import your GitHub repository
4. Vercel auto-detects Vite configuration
5. Add environment variable:
   - Key: `ANTHROPIC_API_KEY`
   - Value: `sk-ant-your-key-here`
6. Click **"Deploy"**

---

## 🧪 Testing Your Deployment

Once deployed, test these features:

### 1. Activity Generation
- Navigate to "Serve" section
- Activities should be generated by Claude AI
- Click "Refresh" to generate new ones
- Check browser console - should see successful API calls

### 2. Photo Verification
- Click camera icon on any activity
- Take a photo
- Click checkmark to verify
- Should see AI verification result (not demo mode)

### 3. Check Logs
```bash
# View real-time logs
vercel logs your-deployment-url --follow
```

---

## 🔧 Troubleshooting

### Issue: "Missing environment variable"
**Solution:** Make sure you added the secret and environment variable:
```bash
vercel secrets add anthropic-api-key sk-ant-your-key
vercel env add ANTHROPIC_API_KEY
# Select Production, enter: @anthropic-api-key
vercel --prod
```

### Issue: "API endpoint not found"
**Solution:** Ensure `api/claude.js` is in your project:
```bash
ls -la api/claude.js  # Should exist
```

### Issue: "Still using mock data"
**Solution:** Check if production build:
1. Open browser DevTools
2. Check console logs
3. Should say "Using backend endpoint" (not "Using mock data")

### Issue: "CORS error still appearing"
**Solution:** The production build uses the backend proxy. Make sure you:
1. Deployed with `vercel --prod`
2. Environment variable is set
3. Cleared browser cache

---

## 📊 Monitor Usage

### Check API Usage
1. Visit [console.anthropic.com](https://console.anthropic.com/)
2. Go to **"Usage"** section
3. Monitor your API calls and costs

### Vercel Analytics
1. Go to your project on Vercel dashboard
2. Click **"Analytics"** tab
3. See traffic, performance, errors

---

## 💰 Cost Estimates

### Vercel (Free Tier)
- ✅ 100 GB bandwidth/month
- ✅ Unlimited deployments
- ✅ Automatic HTTPS
- ✅ Serverless functions included

### Claude API
With image compression enabled:
- Activity generation: ~$0.01 per request
- Photo verification: ~$0.01-0.02 per photo
- Estimated: **$1-5/month** for moderate usage

---

## 🎯 Quick Commands Reference

```bash
# Deploy
vercel

# Deploy to production
vercel --prod

# Add secret
vercel secrets add secret-name secret-value

# Add environment variable
vercel env add VARIABLE_NAME

# View logs
vercel logs your-url --follow

# Remove deployment
vercel rm your-deployment-id

# View project info
vercel inspect your-url
```

---

## 🔐 Security Best Practices

### ✅ What's Secure:
- API key stored as Vercel secret
- Not exposed in frontend code
- Backend proxy handles all API calls
- HTTPS by default

### ⚠️ What to Watch:
- Don't commit `.env` files
- Don't share deployment URLs publicly (if testing with free API credits)
- Monitor API usage regularly
- Set up rate limiting if needed

---

## 📚 Next Steps

After deployment:

1. **Test thoroughly** - Try all features
2. **Share your URL** - Show it off!
3. **Monitor costs** - Check Anthropic usage
4. **Add custom domain** (optional):
   ```bash
   vercel domains add yourdomain.com
   ```

5. **Set up CI/CD** - Auto-deploy on git push:
   - Already enabled if you deployed via GitHub!
   - Every push to main branch auto-deploys

---

## 🎉 You're Done!

Your DoGood app is now live with:
- 🚀 Real Claude AI
- 📸 AI photo verification
- 🔒 Secure deployment
- ⚡ Blazing fast
- 💰 Cost-optimized

**Congratulations!** 🎊

---

## 📞 Need Help?

- [Vercel Documentation](https://vercel.com/docs)
- [Anthropic API Docs](https://docs.anthropic.com/)
- Check `CORS_SOLUTION.md` for more details
- View `IMPLEMENTATION_STATUS.md` for features overview

---

## 🔄 Update Your Deployment

After making changes:

```bash
# Commit changes
git add .
git commit -m "Update features"

# Deploy
vercel --prod
```

Or if using GitHub integration, just push:
```bash
git push
# Vercel auto-deploys!
```

**Happy deploying!** 🚀✨

